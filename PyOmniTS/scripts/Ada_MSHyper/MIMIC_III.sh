use_multi_gpu=0
if [ $use_multi_gpu -eq 0 ]; then
    launch_command="python"
else
    launch_command="accelerate launch"
fi

model_name="$(basename "$(dirname "$(readlink -f "$0")")")" # folder name

#dataset_root_path=storage/datasets/MIMIC_III
dataset_root_path=/mnt/projects/zhuangyo_project/hope_project_data/mimic/mimic-iii/physionet.org/files/mimiciii/1.4/processed/
model_id=$model_name
dataset_name=$(basename "$0" .sh) # file name

seq_len=24
for pred_len in 1; do
    $launch_command /mnt/home/khaledm/PyOmniTS/main.py \
    --is_training 1 \
    --loss "MSE_Dual" \
    --use_multi_gpu $use_multi_gpu \
    --dataset_root_path $dataset_root_path \
    --model_id $model_id \
    --model_name $model_name \
    --dataset_name $dataset_name \
    --features M \
    --seq_len $seq_len \
    --pred_len $pred_len \
    --enc_in 96 \
    --dec_in 96 \
    --c_out 96 \
    --train_epochs 1 \
    --patience 5 \
    --val_interval 1 \
    --itr 1 \
    --batch_size 32 \
    --learning_rate 0.001
done

